// Import global fonts
@import '../../styles/fonts.scss';

// ===================================
// BASE GRID STYLES
// ===================================

.jadis-grid {
  font-family: var(--jadis-font-primary);
  display: grid;
  grid-template-columns: var(--jadis-grid-columns);
  grid-template-rows: var(--jadis-grid-rows);
  align-items: var(--jadis-grid-align-items);
  justify-items: var(--jadis-grid-justify-items);
  align-content: var(--jadis-grid-align-content);
  justify-content: var(--jadis-grid-justify-content);
  grid-auto-flow: var(--jadis-grid-auto-flow);
  width: 100%;
  
  // Gap sizes
  &--gap-none {
    gap: 0;
  }
  
  &--gap-small {
    gap: 0.5rem;
  }
  
  &--gap-medium {
    gap: 1rem;
  }
  
  &--gap-large {
    gap: 1.5rem;
  }
  
  &--gap-xl {
    gap: 2rem;
  }
  
  // Column-specific gaps
  &--column-gap-none {
    column-gap: 0;
  }
  
  &--column-gap-small {
    column-gap: 0.5rem;
  }
  
  &--column-gap-medium {
    column-gap: 1rem;
  }
  
  &--column-gap-large {
    column-gap: 1.5rem;
  }
  
  &--column-gap-xl {
    column-gap: 2rem;
  }
  
  // Row-specific gaps
  &--row-gap-none {
    row-gap: 0;
  }
  
  &--row-gap-small {
    row-gap: 0.5rem;
  }
  
  &--row-gap-medium {
    row-gap: 1rem;
  }
  
  &--row-gap-large {
    row-gap: 1.5rem;
  }
  
  &--row-gap-xl {
    row-gap: 2rem;
  }
  
  // Dense packing
  &--dense {
    grid-auto-flow: dense;
  }
  
  // Bordered grid
  &--bordered {
    border: 1px solid var(--jadis-border-primary);
    padding: 0.5rem;
  }
  
  // Debug mode
  &--debug {
    background: repeating-linear-gradient(
      45deg,
      transparent,
      transparent 10px,
      rgba(255, 0, 0, 0.1) 10px,
      rgba(255, 0, 0, 0.1) 20px
    );
    
    .jadis-grid-item {
      outline: 1px dashed var(--jadis-border-primary);
      background-color: rgba(0, 255, 0, 0.05);
    }
  }
  
  // iPad and smaller screens optimization
  @media (max-width: 1024px) {
    // Reduce complex layouts on smaller screens
    &[style*="repeat(6,"] {
      grid-template-columns: repeat(3, 1fr) !important;
    }
    
    &[style*="repeat(5,"] {
      grid-template-columns: repeat(3, 1fr) !important;
    }
    
    &[style*="repeat(4,"] {
      grid-template-columns: repeat(2, 1fr) !important;
    }
  }
  
  @media (max-width: 768px) {
    // Further simplify on mobile
    &[style*="repeat("] {
      grid-template-columns: 1fr !important;
    }
    
    gap: 0.5rem !important;
  }
}

// ===================================
// GRID ITEM STYLES
// ===================================

.jadis-grid-item {
  font-family: var(--jadis-font-primary);
  grid-column: var(--jadis-grid-item-column-start, auto) / span var(--jadis-grid-item-column-span, auto);
  grid-row: var(--jadis-grid-item-row-start, auto) / span var(--jadis-grid-item-row-span, auto);
  align-self: var(--jadis-grid-item-align-self);
  justify-self: var(--jadis-grid-item-justify-self);
  grid-area: var(--jadis-grid-item-area);
  position: relative;
  min-width: 0; // Prevent grid overflow
  min-height: 0; // Prevent grid overflow
  
  &__content {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
  }
  
  // Bordered items
  &--bordered {
    border: 1px solid var(--jadis-border-primary);
    padding: 1rem;
    box-sizing: border-box;
    
    &::before {
      content: '';
      position: absolute;
      top: 1px;
      left: 1px;
      right: 1px;
      bottom: 1px;
      border: 1px solid var(--jadis-border-secondary);
      pointer-events: none;
      opacity: 0.3;
      box-sizing: border-box;
    }
  }
  
  // Interactive items
  &--interactive {
    cursor: pointer;
    transition: all 0.2s ease;
    
    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 255, 0, 0.2);
    }
    
    &:active {
      transform: translateY(0);
    }
  }
}

// ===================================
// RESPONSIVE GRID STYLES
// ===================================

.jadis-responsive-grid {
  // Extra small screens (mobile)
  @media (max-width: 575.98px) {
    &--xs-1 { grid-template-columns: 1fr; }
    &--xs-2 { grid-template-columns: repeat(2, 1fr); }
    &--xs-3 { grid-template-columns: repeat(3, 1fr); }
    &--xs-4 { grid-template-columns: repeat(4, 1fr); }
    &--xs-auto { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
    &--xs-fit { grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); }
  }
  
  // Small screens (small tablets)
  @media (min-width: 576px) and (max-width: 767.98px) {
    &--sm-1 { grid-template-columns: 1fr; }
    &--sm-2 { grid-template-columns: repeat(2, 1fr); }
    &--sm-3 { grid-template-columns: repeat(3, 1fr); }
    &--sm-4 { grid-template-columns: repeat(4, 1fr); }
    &--sm-5 { grid-template-columns: repeat(5, 1fr); }
    &--sm-auto { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
    &--sm-fit { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
  }
  
  // Medium screens (tablets)
  @media (min-width: 768px) and (max-width: 991.98px) {
    &--md-1 { grid-template-columns: 1fr; }
    &--md-2 { grid-template-columns: repeat(2, 1fr); }
    &--md-3 { grid-template-columns: repeat(3, 1fr); }
    &--md-4 { grid-template-columns: repeat(4, 1fr); }
    &--md-5 { grid-template-columns: repeat(5, 1fr); }
    &--md-6 { grid-template-columns: repeat(6, 1fr); }
    &--md-auto { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
    &--md-fit { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
  }
  
  // Large screens (desktops)
  @media (min-width: 992px) and (max-width: 1199.98px) {
    &--lg-1 { grid-template-columns: 1fr; }
    &--lg-2 { grid-template-columns: repeat(2, 1fr); }
    &--lg-3 { grid-template-columns: repeat(3, 1fr); }
    &--lg-4 { grid-template-columns: repeat(4, 1fr); }
    &--lg-5 { grid-template-columns: repeat(5, 1fr); }
    &--lg-6 { grid-template-columns: repeat(6, 1fr); }
    &--lg-7 { grid-template-columns: repeat(7, 1fr); }
    &--lg-8 { grid-template-columns: repeat(8, 1fr); }
    &--lg-auto { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
    &--lg-fit { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
  }
  
  // Extra large screens (large desktops)
  @media (min-width: 1200px) and (max-width: 1399.98px) {
    &--xl-1 { grid-template-columns: 1fr; }
    &--xl-2 { grid-template-columns: repeat(2, 1fr); }
    &--xl-3 { grid-template-columns: repeat(3, 1fr); }
    &--xl-4 { grid-template-columns: repeat(4, 1fr); }
    &--xl-5 { grid-template-columns: repeat(5, 1fr); }
    &--xl-6 { grid-template-columns: repeat(6, 1fr); }
    &--xl-7 { grid-template-columns: repeat(7, 1fr); }
    &--xl-8 { grid-template-columns: repeat(8, 1fr); }
    &--xl-9 { grid-template-columns: repeat(9, 1fr); }
    &--xl-10 { grid-template-columns: repeat(10, 1fr); }
    &--xl-auto { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
    &--xl-fit { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
  }
  
  // Extra extra large screens (very large desktops)
  @media (min-width: 1400px) {
    &--xxl-1 { grid-template-columns: 1fr; }
    &--xxl-2 { grid-template-columns: repeat(2, 1fr); }
    &--xxl-3 { grid-template-columns: repeat(3, 1fr); }
    &--xxl-4 { grid-template-columns: repeat(4, 1fr); }
    &--xxl-5 { grid-template-columns: repeat(5, 1fr); }
    &--xxl-6 { grid-template-columns: repeat(6, 1fr); }
    &--xxl-7 { grid-template-columns: repeat(7, 1fr); }
    &--xxl-8 { grid-template-columns: repeat(8, 1fr); }
    &--xxl-9 { grid-template-columns: repeat(9, 1fr); }
    &--xxl-10 { grid-template-columns: repeat(10, 1fr); }
    &--xxl-11 { grid-template-columns: repeat(11, 1fr); }
    &--xxl-12 { grid-template-columns: repeat(12, 1fr); }
    &--xxl-auto { grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); }
    &--xxl-fit { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
  }
}

// ===================================
// VARIANT-SPECIFIC STYLES
// ===================================

// Terminal variant
.jadis-grid--terminal {
  color: var(--jadis-color-green);
  background-color: var(--jadis-bg-primary);
  
  &.jadis-grid--bordered {
    border-color: var(--jadis-color-green);
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
  }
}

.jadis-grid-item--terminal {
  color: var(--jadis-color-green);
  
  &.jadis-grid-item--bordered {
    border-color: var(--jadis-color-green);
    background-color: var(--jadis-bg-secondary);
    
    &::before {
      border-color: var(--jadis-color-green);
    }
  }
  
  &.jadis-grid-item--interactive:hover {
    border-color: var(--jadis-color-cyan);
    box-shadow: 0 4px 12px rgba(0, 255, 0, 0.4);
    background-color: var(--jadis-bg-accent);
  }
}

// Matrix variant
.jadis-grid--matrix {
  color: #00ff41;
  background-color: #000000;
  position: relative;
  
  // Move the matrix effect to after pseudo-element to avoid layout interference
  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(0deg, transparent 24%, rgba(32, 194, 14, 0.04) 25%, rgba(32, 194, 14, 0.04) 26%, transparent 27%, transparent 74%, rgba(32, 194, 14, 0.03) 75%, rgba(32, 194, 14, 0.03) 76%, transparent 77%, transparent);
    pointer-events: none;
    animation: matrix-scan 3s linear infinite;
    z-index: 1;
  }
  
  &.jadis-grid--bordered {
    border-color: #00ff41;
    box-shadow: 0 0 15px rgba(0, 255, 65, 0.5);
  }
  
  // ensure grid items are above the matrix effect
  .jadis-grid-item {
    position: relative;
    z-index: 2;
  }
}

.jadis-grid-item--matrix {
  color: #00ff41;
  
  &.jadis-grid-item--bordered {
    border-color: #00ff41;
    background-color: rgba(0, 40, 0, 0.3);
    
    &::before {
      border-color: #00ff41;
    }
  }
  
  &.jadis-grid-item--interactive:hover {
    border-color: #00ffff;
    box-shadow: 0 4px 12px rgba(0, 255, 65, 0.6);
    background-color: rgba(0, 255, 65, 0.1);
  }
}

// Retro variant
.jadis-grid--retro {
  color: #ffb000;
  background-color: #2a1810;
  
  &.jadis-grid--bordered {
    border: 2px solid #ffb000;
    border-style: double;
    box-shadow: 0 0 20px rgba(255, 176, 0, 0.4);
  }
}

.jadis-grid-item--retro {
  color: #ffb000;
  
  &.jadis-grid-item--bordered {
    border: 2px solid #ffb000;
    background-color: #3a2420;
    box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.3);
    
    &::before {
      border: 1px solid #cc8800;
    }
  }
  
  &.jadis-grid-item--interactive:hover {
    border-color: #ffd700;
    box-shadow: 0 4px 12px rgba(255, 176, 0, 0.5);
    background-color: rgba(255, 176, 0, 0.1);
  }
}

// Minimal variant
.jadis-grid--minimal {
  color: #e0e0e0;
  background-color: transparent;
  
  &.jadis-grid--bordered {
    border-color: #666666;
    background-color: rgba(255, 255, 255, 0.02);
  }
}

.jadis-grid-item--minimal {
  color: #e0e0e0;
  
  &.jadis-grid-item--bordered {
    border-color: #666666;
    background-color: rgba(255, 255, 255, 0.05);
    
    &::before {
      border-color: #444444;
    }
  }
  
  &.jadis-grid-item--interactive:hover {
    border-color: #999999;
    box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
    background-color: rgba(255, 255, 255, 0.08);
  }
}

// Glow variant
.jadis-grid--glow {
  color: #00ffff;
  background-color: #0a0015;
  
  &.jadis-grid--bordered {
    border-color: #00ffff;
    box-shadow: 
      0 0 10px rgba(0, 255, 255, 0.5),
      0 0 20px rgba(0, 255, 255, 0.3),
      0 0 40px rgba(0, 255, 255, 0.1);
    animation: glow-pulse 2s ease-in-out infinite alternate;
  }
}

.jadis-grid-item--glow {
  color: #00ffff;
  
  &.jadis-grid-item--bordered {
    border-color: #00ffff;
    background-color: rgba(0, 20, 40, 0.3);
    box-shadow: 
      0 0 5px rgba(0, 255, 255, 0.3),
      inset 0 0 10px rgba(0, 255, 255, 0.1);
    
    &::before {
      border-color: #0088ff;
    }
  }
  
  &.jadis-grid-item--interactive:hover {
    border-color: #ff00ff;
    box-shadow: 
      0 4px 12px rgba(0, 255, 255, 0.6),
      0 0 20px rgba(255, 0, 255, 0.4);
    background-color: rgba(0, 255, 255, 0.1);
  }
}

// ===================================
// ANIMATIONS
// ===================================

@keyframes matrix-scan {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100vh); }
}

@keyframes glow-pulse {
  0% { 
    box-shadow: 
      0 0 10px rgba(0, 255, 255, 0.5),
      0 0 20px rgba(0, 255, 255, 0.3),
      0 0 40px rgba(0, 255, 255, 0.1);
  }
  100% { 
    box-shadow: 
      0 0 15px rgba(0, 255, 255, 0.8),
      0 0 30px rgba(0, 255, 255, 0.5),
      0 0 60px rgba(0, 255, 255, 0.2);
  }
}